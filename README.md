# TODO List Application with Qt

**(ТУТ БУДЕТ GIF)**

---

## Содержание

1. [Идея проекта](#project-idea)
2. [Установка](#how-to-build)
3. [Тестирование](#tests)
4. [Удаление задач из БД](#delete-tasks-from-db)
5. [Планы по доработке](#todo)

---
### Идея проекта
Необходимо реализовать небольшое приложение TODO-list с использованием Qt6. Пользователь должен иметь возможность добавлять/удалять задачи, менять их статус и фильтровать. Полное описание задачи доступно [**тут**](README.md).

Для того, чтобы задачи не удалялись с закрытием приложения, я добавляю их в базу данных PostgreSQL.

### Установка
Разработка велась на Debian 12 с испльзованием только стандартных пакетов.

Вам потребуется установить PostgreSQL, Qt6, CMake, Make
```bash
sudo apt install g++ make cmake postgresql qt6-base-dev libqt6sql6-psql clang-format
```
Команда `clang-format` автоматически вызывается первой при каждой сборке проекта. Её можно отключить, удалив строки 44-50 и 54 из [CMakeLists.txt](CMakeLists.txt)

Затем нужно подготовить БД для работы (иначе программа будет завершаться с ошибкой):
```bash
bash init_db.sh
```
И затем собрать проект с помощью Makefile, который уже запускает cmake:
```bash
make
```
Запускать приложение нужно из корневой папки проекта:
```bash
./TODO-list
```

---

### Тестирование
- Во-первых, есть возможность собрать приложение с санитайзерами `-fsanitize=address -fsanitize=leak -fsanitize=undefined` :
```bash
make debug
```
Создаётся программа с тем же именем - `TODO-list` 

- Во-вторых, для проекта (а именно для его части, которая отвечает за взаимодействие с БД и фильтрацией задач - **DbTaskController**) написаны тесты с использованием **QtTest**. Тесты находятся в папке [tests](tests). Запуск тестов:
```bash
make tests
```
Вывод:
![test_output](assets/test_output.png)

---

### Удаление задач из БД
Все объекты базы данных, используемые в приложении, можно удалить следующей командой:
```bash
bash clear_db.sh
```

### Планы по доработке
Что можно добавить и что улучшить?
- Написать больше тестов
- Проработать фильтрацию задач. Текущий алгоритм не кажется самым эффективным
- Добавить перевод на другие языки